<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Battery Usage Logs</title>
    <link rel="stylesheet" th:href="@{/css/style.css}">
</head>
<body>
<div th:replace="~{fragments/navbar :: navbar}"></div>

<h2 th:if="${battery != null}" th:text="'Usage Logs for Battery ' + ${battery.serialNumber}"></h2>
<h2 th:if="${battery == null}">All Usage Logs</h2>
<a th:href="@{/usage/add}" class="btn btn-add">➕ Add Usage</a>
<table>
    <thead>
    <tr>
        <th>Date Used</th>
        <th>Robot</th>
        <th>Event</th>
        <th>Battery</th>
        <th>Actions</th>
<!--        <th>Test Type</th>-->
        <th>Test Date</th>
        <th>Voltage</th>
        <th>Resistance</th>
        <th>Temp</th>
        <th>Tester</th>
        <th>1v1</th>
        <th>18v2</th>
        <th>Amp Hours</th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="u : ${logs}">
        <td th:text="${#temporals.format(u.usedDate, 'yyyy-MM-dd HH:mm')}"></td>
        <td th:text="${u.robotName}"></td>
        <td th:text="${u.eventName}"></td>
        <td th:text="${u.battery.serialNumber}"></td>
        <td th:text="${u.test?.testType ?: '—'}"></td>
        <td th:text="${u.test?.testDate != null ? #temporals.format(u.test.testDate,'yyyy-MM-dd HH:mm') : '—'}"></td>
        <td th:text="${u.test?.voltage ?: '—'}"></td>
        <td th:text="${u.test?.internalResistance ?: '—'}"></td>
        <td th:text="${u.test?.temperature ?: '—'}"></td>
        <td th:text="${u.test?.tester ?: '—'}"></td>
        <td th:text="${u.test?.oneV1 ?: '—'}"></td>
        <td th:text="${u.test?.eighteenV2 ?: '—'}"></td>
        <td th:text="${u.test?.ampHours ?: '—'}"></td>
        <td>
            <a th:href="@{'/usage/delete/' + ${u.id}}" class="btn btn-danger">Delete</a>
        </td>
    </tr>
    </tbody>
</table>

<div th:if="${battery != null}">
    <a th:href="@{'/usage/add/' + ${battery.id}}" class="btn btn-primary">Add Usage</a>
</div>

</body>
</html>